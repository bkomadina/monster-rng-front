var e,t,n,o,a=function(){var e=document.getElementById("background");e.innerHTML="",e.innerHTML='\n    <section>\n    <section class="up up-close">\n      <h1 class="monster-name">'.concat(randomMonster.name,' HP:</h1>\n      <progress id="monster-hp" max="" value=""></progress>\n      <h1 class="player">Your HP:</h1>\n      <progress id="player-hp" max="" value=""></progress>\n      <div class="fight-container">\n        <button id="att-btn" class="fight-btn">Attack</button>\n        <button id="heavy-att-btn" class="fight-btn">Heavy Attack</button>\n      </div>\n    </section>\n    </section>\n    <section>\n    <section class="down down-close">\n      <div class="heal">\n        <button id="heal-btn" class="fight-btn">Heal</button>\n      </div>\n      <button id="retry-btn">Retry</button>\n      <button id="home-btn">Create another monster</button>\n    </section>\n    </section>\n  '),setTimeout((function(){d()}),100)},i={};e=i,t="fightMonster",n=()=>s,o=e=>s=e,Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0});var r=function(){var e=document.getElementById("background");e.innerHTML="",e.innerHTML='\n  <section>\n  <section class="up up-close">\n      <h1 class="top-heading">Create your monster</h1>\n      <form id="form-create">\n        <label for="name">Name:</label>\n        <input id="name" type="text" pattern="[a-zA-Z0-9s]{2,20}" title="2 to 20 letters, no special characters" required="required" autocomplete="off">\n        <label for="HP">HP:</label>\n        <input id="HP" type="number" min="15" max="160">\n        <label for="damage">Damage:</label>\n        <input id="damage" type="number" min="5" max="30">\n        <button type="submit">Create</button>\n      </form>\n      \x3c!-- <div class="border"></div> --\x3e\n    </section>\n    </section>\n    <section>\n    <section class="down down-close">\n      <h1 class="bottom-heading">Select difficulty:</h1>\n      <form id="form-difficulty">\n          <ul>\n            <li>\n              <input name="difficulty" id="easy" value="easy" type="radio" checked="checked" class="circle">\n              <label for="easy">Easy</label>\n            </li>\n            <li>\n              <input name="difficulty" id="medium" value="medium" type="radio" class="circle">\n              <label for="medium">Medium</label>\n              </li>\n              <li>\n                <input name="difficulty" id="hard" value="hard" type="radio" class="circle">\n                <label for="hard">Hard</label>\n              </li>\n              <li class="last">\n                <input name="difficulty" id="last" value="last" type="radio" class="circle">\n                <label for="last">Last Created</label>\n              </li>\n              <li class="last">\n                <button id="fight-monster-btn" type="submit">Fight monster</button>\n              </li>\n            </ul>\n        </form>\n    </section>\n    </section>\n',setTimeout((function(){d()}),100);var t=document.getElementById("form-create"),n=document.getElementById("form-difficulty");n.querySelector('input[name="difficulty"]:checked').value;t.addEventListener("submit",m),n.addEventListener("submit",f)},s=function(){var e,t,n,o=+randomMonster.HP,a=+randomMonster.damage,i=100,s=document.getElementById("monster-hp"),c=document.getElementById("player-hp"),l=document.getElementById("att-btn"),m=document.getElementById("heavy-att-btn"),f=document.getElementById("heal-btn"),v=document.getElementById("retry-btn"),g=document.getElementById("home-btn"),h=function(o){s.max=o,s.value=o,e=o,c.max=i,c.value=i,t=i,n=!0},y=function(){return Math.round(10*(Math.random()-.5))},b=function(){var e=a+y();e<0&&(e=0),t-=e,c.value=t},p=function(){var t=10+y();e-=t,s.value=e,b(),w()},E=function(){var t=18+y();e-=t,s.value=e,b(),w()||(b(),w())},L=function(){n?((t+=45+y())>=i?(t=i,c.value=t):c.value=t,n=!1,b(),w()):u("No healing uses left","stay")},w=function(){return e<=0&&t>=0?(u("You won!","stay"),h(o),!0):t<=0&&e>=0?(u("You lost!","stay"),h(o),!0):e<=0&&t<=0?(u("Draw!","stay"),h(o),!0):void 0},k=function(){l.removeEventListener("click",p),m.removeEventListener("click",E),f.removeEventListener("click",L),v.removeEventListener("click",h.bind(this,o)),g.removeEventListener("click",r),d(),setTimeout((function(){r()}),600)}.bind(this);h(o),l.addEventListener("click",p),m.addEventListener("click",E),f.addEventListener("click",L),v.addEventListener("click",h.bind(this,o)),g.addEventListener("click",k)}.bind(void 0),c=document.getElementById("form-create"),l=document.getElementById("form-difficulty"),u=function(e,t){var n=void 0===t?"timed":t,o=document.querySelector(".notification"),a=document.querySelector("#notificationType");o.classList.toggle("active"),a.classList.toggle("notificationText"),a.innerText="".concat(e);var i=function(){a.innerText="",o.classList.toggle("active"),a.classList.toggle("notificationText"),window.removeEventListener("mouseup",i)};"stay"===n?window.addEventListener("mouseup",i):setTimeout(i,2e3)},d=function(){document.querySelector(".up").classList.toggle("up-close"),document.querySelector(".down").classList.toggle("down-close")},m=function(e){e.preventDefault();var t,n,o=document.getElementById("form-create");fetch("https://monster-rng-back.herokuapp.com/add-monster",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.name.value.toUpperCase(),HP:o.HP.value,damage:o.damage.value,difficulty:(t=o.HP.value,n=o.damage.value,n<=12&&t<=70||n<=7&&t<=130||n<=30&&t<=25?"easy":n<=15&&t<=80||n<=9&&t<=140||n<=30&&t<=35?"medium":"hard")})}).then((function(e){if(400===e.status)throw new Error("Too crazy monster stats");return e.json()})).then((function(e){console.log(e),u("Monster created!"),window.localStorage.setItem("last created",JSON.stringify(e._id)),o.reset()})).catch((function(e){console.log(e),u(e)}))},f=function(e){e.preventDefault();var t=document.getElementById("form-difficulty"),n=t.querySelector('input[name="difficulty"]:checked').value;if("last"===n){var o=JSON.parse(window.localStorage.getItem("last created"));fetch("https://monster-rng-back.herokuapp.com/lastcreated/"+o).then((function(e){if(404===e.status)throw new Error("Your last created monster escaped. Create another one");return e.json()})).then((function(e){window.randomMonster={name:e.name,HP:e.HP,damage:e.damage},c.removeEventListener("submit",m),t.removeEventListener("submit",f),d(),setTimeout((function(){a(),i.fightMonster()}),600)})).catch((function(e){console.log(e),u(e)}))}else fetch("https://monster-rng-back.herokuapp.com/monster/"+n).then((function(e){if(404===e.status)throw new Error("Could not find monster with selected difficulty, please create more");return e.json()})).then((function(e){window.randomMonster={name:e.name,HP:e.HP,damage:e.damage},c.removeEventListener("submit",m),t.removeEventListener("submit",f),d(),setTimeout((function(){a(),i.fightMonster()}),600)})).catch((function(e){console.log(e),u(e)}))};c.addEventListener("submit",m),l.addEventListener("submit",f);export{f as getMonsterHandler,d as closingAnimation,u as notificationToggle,m as createMonsterHandler};
//# sourceMappingURL=index.bfe594cd.js.map
