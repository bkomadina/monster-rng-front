const e=()=>{const e=document.getElementById("background");e.innerHTML="",e.innerHTML=`\n    <section>\n    <section class="up up-close">\n      <h1 class="monster-name">${randomMonster.name} HP:</h1>\n      <progress id="monster-hp" max="" value=""></progress>\n      <h1 class="player">Your HP:</h1>\n      <progress id="player-hp" max="" value=""></progress>\n      <div class="fight-container">\n        <button id="att-btn" class="fight-btn">Attack</button>\n        <button id="heavy-att-btn" class="fight-btn">Heavy Attack</button>\n      </div>\n    </section>\n    </section>\n    <section>\n    <section class="down down-close">\n      <div class="heal">\n        <button id="heal-btn" class="fight-btn">Heal</button>\n      </div>\n      <button id="retry-btn">Retry</button>\n      <button id="home-btn">Create another monster</button>\n    </section>\n    </section>\n  `,setTimeout((()=>{u()}),100)};var t,n,o,a,s={};t=s,n="fightMonster",o=()=>l,a=e=>l=e,Object.defineProperty(t,n,{get:o,set:a,enumerable:!0,configurable:!0});const i=()=>{const e=document.getElementById("background");e.innerHTML="",e.innerHTML='\n  <section>\n  <section class="up up-close">\n      <h1 class="top-heading">Create your monster</h1>\n      <form id="form-create">\n        <label for="name">Name:</label>\n        <input id="name" type="text" minlength="2" maxlength="20">\n        <label for="HP">HP:</label>\n        <input id="HP" type="number" min="15" max="160">\n        <label for="damage">Damage:</label>\n        <input id="damage" type="number" min="5" max="30">\n        <button type="submit">Create</button>\n      </form>\n      \x3c!-- <div class="border"></div> --\x3e\n    </section>\n    </section>\n    <section>\n    <section class="down down-close">\n      <h1 class="bottom-heading">Select difficulty:</h1>\n      <form id="form-difficulty">\n          <ul>\n            <li>\n              <input name="difficulty" id="easy" value="easy" type="radio" checked="checked" class="circle">\n              <label for="easy">Easy</label>\n            </li>\n            <li>\n              <input name="difficulty" id="medium" value="medium" type="radio" class="circle">\n              <label for="medium">Medium</label>\n              </li>\n              <li>\n                <input name="difficulty" id="hard" value="hard" type="radio" class="circle">\n                <label for="hard">Hard</label>\n              </li>\n              <li class="last">\n                <input name="difficulty" id="last" value="last" type="radio" class="circle">\n                <label for="last">Last Created</label>\n              </li>\n              <li class="last">\n                <button id="fight-monster-btn" type="submit">Fight random monster</button>\n              </li>\n            </ul>\n        </form>\n    </section>\n    </section>\n',setTimeout((()=>{u()}),100);const t=document.getElementById("form-create"),n=document.getElementById("form-difficulty");n.querySelector('input[name="difficulty"]:checked').value;t.addEventListener("submit",f),n.addEventListener("submit",g)},l=()=>{let e,t=+randomMonster.HP,n=+randomMonster.damage;const o=100;let a,s;const l=document.getElementById("monster-hp"),r=document.getElementById("player-hp"),c=document.getElementById("att-btn"),d=document.getElementById("heavy-att-btn"),f=document.getElementById("heal-btn"),g=document.getElementById("retry-btn"),y=document.getElementById("home-btn"),v=t=>{l.max=t,l.value=t,e=t,r.max=o,r.value=o,a=o,s=!0},b=()=>Math.round(10*(Math.random()-.5)),h=()=>{let e=n+b();e<0&&(e=0),a-=e,r.value=a},p=()=>{let t=10+b();e-=t,l.value=e,h(),w()},E=()=>{let t=18+b();e-=t,l.value=e,h(),w()||h()},L=()=>{s?(a+=45+b(),a>=o?(a=o,r.value=a):r.value=a,s=!1,h(),w()):m("No healing uses left","stay")},w=()=>e<=0&&a>=0?(m("You won!","stay"),v(t),!0):a<=0&&e>=0?(m("You lost!","stay"),v(t),!0):e<=0&&a<=0?(m("Draw!","stay"),v(t),!0):void 0;v(t),c.addEventListener("click",p),d.addEventListener("click",E),f.addEventListener("click",L),g.addEventListener("click",v.bind(void 0,t)),y.addEventListener("click",(()=>{c.removeEventListener("click",p),d.removeEventListener("click",E),f.removeEventListener("click",L),g.removeEventListener("click",v.bind(void 0,t)),y.removeEventListener("click",i),u(),setTimeout((()=>{i()}),600)}))},r=process.env.BACK_URL,c=document.getElementById("form-create"),d=document.getElementById("form-difficulty"),m=(e,t="timed")=>{const n=document.querySelector(".notification"),o=document.querySelector("#notificationType");n.classList.toggle("active"),o.classList.toggle("notificationText"),o.innerText=`${e}`;const a=()=>{o.innerText="",n.classList.toggle("active"),o.classList.toggle("notificationText"),window.removeEventListener("mouseup",a)};"stay"===t?window.addEventListener("mouseup",a):setTimeout(a,2e3)},u=()=>{document.querySelector(".up").classList.toggle("up-close"),document.querySelector(".down").classList.toggle("down-close")},f=e=>{e.preventDefault();const t=document.getElementById("form-create");var n,o;fetch(r+"/add-monster",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name.value.toUpperCase(),HP:t.HP.value,damage:t.damage.value,difficulty:(n=t.HP.value,o=t.damage.value,o<=12&&n<=70||o<=7&&n<=130||o<=30&&n<=25?"easy":o<=15&&n<=80||o<=9&&n<=140||o<=30&&n<=35?"medium":"hard")})}).then((e=>{if(400===e.status)throw new Error("Too crazy monster stats");return e.json()})).then((e=>{console.log(e),m("Monster created!"),window.localStorage.setItem("last created",JSON.stringify(e._id)),t.reset()})).catch((e=>{console.log(e),m(e)}))},g=t=>{t.preventDefault();const n=document.getElementById("form-difficulty"),o=n.querySelector('input[name="difficulty"]:checked').value;if("last"===o){const t=JSON.parse(window.localStorage.getItem("last created"));fetch(r+"/lastcreated/"+t).then((e=>{if(404===e.status)throw new Error("Your last created monster escaped. Create another one");return e.json()})).then((t=>{window.randomMonster={name:t.name,HP:t.HP,damage:t.damage},c.removeEventListener("submit",f),n.removeEventListener("submit",g),u(),setTimeout((()=>{e(),s.fightMonster()}),600)})).catch((e=>{console.log(e),m(e)}))}else fetch(r+"/monster/"+o).then((e=>{if(404===e.status)throw new Error("Could not find monster with selected difficulty, please create more");return e.json()})).then((t=>{window.randomMonster={name:t.name,HP:t.HP,damage:t.damage},c.removeEventListener("submit",f),n.removeEventListener("submit",g),u(),setTimeout((()=>{e(),s.fightMonster()}),600)})).catch((e=>{console.log(e),m(e)}))};c.addEventListener("submit",f),d.addEventListener("submit",g);export{u as closingAnimation,g as getMonsterHandler,f as createMonsterHandler,m as notificationToggle};
//# sourceMappingURL=index.HASH_REF_e438b78d4a418ede11a84519e463df3e.js.map
